<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الملف الشخصي - مساعد طبي ذكي</title>
    <meta name="description" content="إدارة الملف الشخصي والمعلومات الطبية في المساعد الطبي الذكي">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap RTL -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Unified Theme CSS -->
    <link rel="stylesheet" href="css/unified-theme.css">
    <!-- Medical Enhancements CSS -->
    <link rel="stylesheet" href="css/medical-enhancements.css">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .profile-header {
            background: linear-gradient(135deg, var(--bs-primary) 0%, var(--bs-primary-dark) 100%);
            color: white;
            padding: 2rem 0;
        }
        .profile-avatar {
            width: 120px;
            height: 120px;
            border: 4px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .profile-card {
            border: none;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .profile-card:hover {
            transform: translateY(-5px);
        }
        .stats-card {
            background: linear-gradient(135deg, #f8f9fa 0%, white 100%);
            border-left: 4px solid var(--bs-primary);
        }
        .medical-info-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 100%);
            border-left: 4px solid var(--bs-info);
        }
        .settings-card {
            background: linear-gradient(135deg, #f3e5f5 0%, #f8f9fa 100%);
            border-left: 4px solid var(--bs-secondary);
        }
        .form-control:focus {
            border-color: var(--bs-primary);
            box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25);
        }
        .btn-edit {
            background: linear-gradient(135deg, var(--bs-success) 0%, #059669 100%);
            border: none;
            color: white;
        }
        .btn-edit:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
        }
        .avatar-upload {
            position: relative;
            display: inline-block;
        }
        .avatar-upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            cursor: pointer;
        }
        .avatar-upload:hover .avatar-upload-overlay {
            opacity: 1;
        }
        .section-title {
            color: var(--bs-dark);
            font-weight: 700;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--bs-primary);
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <i class="fas fa-heartbeat text-primary me-2"></i>
                <span class="fw-bold">مساعد طبي ذكي</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">الرئيسية</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="diagnosis.html">التشخيص</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="appointments.html">حجز موعد</a>
                    </li>
                    <li class="nav-item" id="userMenuContainer">
                        <div class="dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user-circle me-1"></i>
                                <span id="userDisplayName">المستخدم</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="my-appointments.html"><i class="fas fa-calendar me-2"></i>مواعيدي</a></li>
                                <li><a class="dropdown-item active" href="profile.html"><i class="fas fa-user me-2"></i>الملف الشخصي</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" id="logoutBtn"><i class="fas fa-sign-out-alt me-2"></i>تسجيل الخروج</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Profile Header -->
    <section class="profile-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-3 text-center">
                    <div class="avatar-upload">
                        <img src="https://via.placeholder.com/120x120/2563eb/ffffff?text=صورة" 
                             alt="الصورة الشخصية" 
                             class="profile-avatar rounded-circle" 
                             id="profileAvatar">
                        <div class="avatar-upload-overlay rounded-circle">
                            <i class="fas fa-camera text-white fa-lg"></i>
                        </div>
                        <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                    </div>
                </div>
                <div class="col-md-9">
                    <h1 class="fw-bold mb-2" id="profileName">اسم المستخدم</h1>
                    <p class="mb-1" id="profileEmail">user@example.com</p>
                    <p class="mb-0" id="profilePhone">+20 123 456 7890</p>
                    <div class="mt-3">
                        <span class="badge bg-light text-dark me-2">
                            <i class="fas fa-calendar me-1"></i>
                            عضو منذ <span id="memberSince">يناير 2024</span>
                        </span>
                        <span class="badge bg-light text-dark">
                            <i class="fas fa-clock me-1"></i>
                            آخر زيارة <span id="lastVisit">اليوم</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Profile Content -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <!-- Statistics Cards -->
                <div class="col-12 mb-4">
                    <div class="row g-4">
                        <div class="col-md-4">
                            <div class="card stats-card h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-calendar-check text-primary fa-2x mb-3"></i>
                                    <h3 class="fw-bold text-primary mb-1" id="totalAppointments">0</h3>
                                    <p class="text-muted mb-0">إجمالي المواعيد</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card stats-card h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-check-circle text-success fa-2x mb-3"></i>
                                    <h3 class="fw-bold text-success mb-1" id="completedVisits">0</h3>
                                    <p class="text-muted mb-0">الزيارات المكتملة</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card stats-card h-100">
                                <div class="card-body text-center">
                                    <i class="fas fa-stethoscope text-info fa-2x mb-3"></i>
                                    <h3 class="fw-bold text-info mb-1" id="diagnosisCount">0</h3>
                                    <p class="text-muted mb-0">التشخيصات</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-lg-8">
                    <!-- Personal Information -->
                    <div class="card profile-card mb-4">
                        <div class="card-header bg-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="section-title mb-0">
                                    <i class="fas fa-user me-2"></i>المعلومات الشخصية
                                </h5>
                                <button class="btn btn-edit btn-sm" id="editPersonalBtn">
                                    <i class="fas fa-edit me-1"></i>تعديل
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="personalInfoForm">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">الاسم الكامل</label>
                                        <input type="text" class="form-control" id="fullName" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">البريد الإلكتروني</label>
                                        <input type="email" class="form-control" id="email" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">رقم الهاتف</label>
                                        <input type="tel" class="form-control" id="phone" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">تاريخ الميلاد</label>
                                        <input type="date" class="form-control" id="birthDate" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">الجنس</label>
                                        <select class="form-select" id="gender" disabled>
                                            <option value="">اختر الجنس</option>
                                            <option value="male">ذكر</option>
                                            <option value="female">أنثى</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">العمر</label>
                                        <input type="number" class="form-control" id="age" readonly>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">العنوان</label>
                                        <textarea class="form-control" id="address" rows="2" readonly></textarea>
                                    </div>
                                </div>
                                <div class="mt-3 d-none" id="personalInfoActions">
                                    <button type="submit" class="btn btn-primary me-2">
                                        <i class="fas fa-save me-1"></i>حفظ التغييرات
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="cancelPersonalBtn">
                                        <i class="fas fa-times me-1"></i>إلغاء
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Medical Information -->
                    <div class="card profile-card medical-info-card mb-4">
                        <div class="card-header bg-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="section-title mb-0">
                                    <i class="fas fa-heartbeat me-2"></i>المعلومات الطبية
                                </h5>
                                <button class="btn btn-edit btn-sm" id="editMedicalBtn">
                                    <i class="fas fa-edit me-1"></i>تعديل
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="medicalInfoForm">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">فصيلة الدم</label>
                                        <select class="form-select" id="bloodType" disabled>
                                            <option value="">اختر فصيلة الدم</option>
                                            <option value="A+">A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                            <option value="O+">O+</option>
                                            <option value="O-">O-</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">الطول (سم)</label>
                                        <input type="number" class="form-control" id="height" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">الوزن (كجم)</label>
                                        <input type="number" class="form-control" id="weight" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">مؤشر كتلة الجسم</label>
                                        <input type="text" class="form-control" id="bmi" readonly>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">الحساسية</label>
                                        <textarea class="form-control" id="allergies" rows="2" readonly placeholder="اذكر أي حساسية لديك..."></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">الأمراض المزمنة</label>
                                        <textarea class="form-control" id="chronicDiseases" rows="2" readonly placeholder="اذكر أي أمراض مزمنة..."></textarea>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">الأدوية الحالية</label>
                                        <textarea class="form-control" id="currentMedications" rows="2" readonly placeholder="اذكر الأدوية التي تتناولها حالياً..."></textarea>
                                    </div>
                                </div>
                                <div class="mt-3 d-none" id="medicalInfoActions">
                                    <button type="submit" class="btn btn-primary me-2">
                                        <i class="fas fa-save me-1"></i>حفظ التغييرات
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="cancelMedicalBtn">
                                        <i class="fas fa-times me-1"></i>إلغاء
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <!-- Account Settings -->
                    <div class="card profile-card settings-card mb-4">
                        <div class="card-header bg-white">
                            <h5 class="section-title mb-0">
                                <i class="fas fa-cog me-2"></i>إعدادات الحساب
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#changePasswordModal">
                                    <i class="fas fa-key me-2"></i>تغيير كلمة المرور
                                </button>
                                <button class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#notificationModal">
                                    <i class="fas fa-bell me-2"></i>إعدادات الإشعارات
                                </button>
                                <button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#privacyModal">
                                    <i class="fas fa-shield-alt me-2"></i>إعدادات الخصوصية
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card profile-card mb-4">
                        <div class="card-header bg-white">
                            <h5 class="section-title mb-0">
                                <i class="fas fa-bolt me-2"></i>إجراءات سريعة
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <a href="appointments.html" class="btn btn-primary">
                                    <i class="fas fa-calendar-plus me-2"></i>حجز موعد جديد
                                </a>
                                <a href="diagnosis.html" class="btn btn-success">
                                    <i class="fas fa-stethoscope me-2"></i>تشخيص جديد
                                </a>
                                <a href="my-appointments.html" class="btn btn-info">
                                    <i class="fas fa-history me-2"></i>عرض المواعيد
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency Contact -->
                    <div class="card profile-card">
                        <div class="card-header bg-white">
                            <h5 class="section-title mb-0">
                                <i class="fas fa-phone-alt me-2"></i>جهة اتصال الطوارئ
                            </h5>
                        </div>
                        <div class="card-body">
                            <form id="emergencyContactForm">
                                <div class="mb-3">
                                    <label class="form-label">الاسم</label>
                                    <input type="text" class="form-control" id="emergencyName" placeholder="اسم جهة الاتصال">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">رقم الهاتف</label>
                                    <input type="tel" class="form-control" id="emergencyPhone" placeholder="رقم الهاتف">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">العلاقة</label>
                                    <select class="form-select" id="emergencyRelation">
                                        <option value="">اختر العلاقة</option>
                                        <option value="parent">والد/والدة</option>
                                        <option value="spouse">زوج/زوجة</option>
                                        <option value="sibling">أخ/أخت</option>
                                        <option value="friend">صديق</option>
                                        <option value="other">أخرى</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">
                                    <i class="fas fa-save me-1"></i>حفظ
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Change Password Modal -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4">
                <div class="modal-header">
                    <h5 class="modal-title" id="changePasswordModalLabel">
                        <i class="fas fa-key me-2"></i>تغيير كلمة المرور
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm">
                        <div class="mb-3">
                            <label class="form-label">كلمة المرور الحالية</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="currentPassword" required>
                                <button class="btn btn-outline-secondary" type="button" id="toggleCurrentPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">كلمة المرور الجديدة</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="newPassword" required minlength="6">
                                <button class="btn btn-outline-secondary" type="button" id="toggleNewPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="form-text">كلمة المرور يجب أن تكون 6 أحرف على الأقل</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">تأكيد كلمة المرور الجديدة</label>
                            <input type="password" class="form-control" id="confirmNewPassword" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>حفظ كلمة المرور الجديدة
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Settings Modal -->
    <div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4">
                <div class="modal-header">
                    <h5 class="modal-title" id="notificationModalLabel">
                        <i class="fas fa-bell me-2"></i>إعدادات الإشعارات
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="notificationForm">
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                                <label class="form-check-label" for="emailNotifications">
                                    إشعارات البريد الإلكتروني
                                </label>
                            </div>
                            <small class="text-muted">تلقي إشعارات المواعيد والتذكيرات عبر البريد الإلكتروني</small>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="smsNotifications" checked>
                                <label class="form-check-label" for="smsNotifications">
                                    إشعارات الرسائل النصية
                                </label>
                            </div>
                            <small class="text-muted">تلقي تذكيرات المواعيد عبر الرسائل النصية</small>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="appointmentReminders" checked>
                                <label class="form-check-label" for="appointmentReminders">
                                    تذكيرات المواعيد
                                </label>
                            </div>
                            <small class="text-muted">تلقي تذكيرات قبل المواعيد بـ 24 ساعة</small>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="healthTips">
                                <label class="form-check-label" for="healthTips">
                                    نصائح صحية
                                </label>
                            </div>
                            <small class="text-muted">تلقي نصائح صحية ومعلومات طبية مفيدة</small>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>حفظ الإعدادات
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Privacy Settings Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel">
                        <i class="fas fa-shield-alt me-2"></i>إعدادات الخصوصية
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="privacyForm">
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="profileVisibility" checked>
                                <label class="form-check-label" for="profileVisibility">
                                    إظهار الملف الشخصي للأطباء
                                </label>
                            </div>
                            <small class="text-muted">السماح للأطباء برؤية معلوماتك الأساسية</small>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="medicalHistory" checked>
                                <label class="form-check-label" for="medicalHistory">
                                    مشاركة التاريخ الطبي
                                </label>
                            </div>
                            <small class="text-muted">مشاركة التاريخ الطبي مع الأطباء المعالجين</small>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="dataAnalytics">
                                <label class="form-check-label" for="dataAnalytics">
                                    تحليل البيانات لتحسين الخدمة
                                </label>
                            </div>
                            <small class="text-muted">استخدام بياناتك المجهولة لتحسين الخدمات الطبية</small>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="marketingEmails">
                                <label class="form-check-label" for="marketingEmails">
                                    رسائل تسويقية
                                </label>
                            </div>
                            <small class="text-muted">تلقي عروض وخدمات طبية جديدة</small>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>حفظ الإعدادات
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Arabic Localization -->
    <script src="js/arabic-localization.js"></script>
    <!-- Main JS -->
    <script src="js/main-bootstrap.js"></script>
    <!-- Profile JS -->
    <script src="js/profile.js"></script>
</body>
</html>
